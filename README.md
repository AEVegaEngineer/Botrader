# Botrader: Advanced AI-Driven Algorithmic Trading System ğŸš€

Botrader is an institutional-grade, locally deployed algorithmic trading platform designed for Bitcoin and crypto markets. It evolves beyond simple technical analysis bots by integrating deep learning, high-frequency order book features, and robust risk management into a unified, containerized system.

![Dashboard Preview](https://placehold.co/1200x600/1e1e1e/FFF?text=Botrader+Dashboard+Preview)

## ğŸŒŸ Key Features

### ğŸ§  Advanced AI & Machine Learning
*   **Multi-Model Architecture**: Supports LightGBM (Gradient Boosting), LSTM/GRU (Recurrent Nets), Transformers (Attention mechanisms), and DeepLOB (CNNs for Order Books).
*   **Reinforcement Learning**: Experimental RL agents (PPO/DQN) that learn optimal execution policies.
*   **Explainable AI**: Integrated **SHAP** (Shapley Additive Explanations) to visualize exactly *why* the model made a trade decision.
*   **MLOps Pipeline**: Local **MLflow** integration for tracking experiments, model versioning, and performance metrics.

### ğŸ›¡ï¸ Institutional Risk Management
*   **Volatility Targeting**: Automatically adjusts position sizes based on market volatility to maintain a constant risk profile.
*   **Portfolio Optimization**: Mean-Variance and Risk-Parity optimizers for multi-asset allocation.
*   **Circuit Breakers**: Automatic kill switches for high latency, error rates, or excessive drawdown.
*   **Audit Trail**: Immutable logs of all manual interventions and strategy changes.

### âš¡ Smart Execution
*   **Algo Execution**: Built-in **TWAP** (Time-Weighted Average Price) and **VWAP** (Volume-Weighted Average Price) algorithms for minimizing slippage on large orders.
*   **Liquidity Awareness**: Dynamically switches between aggressive (Market) and passive (Limit) orders based on order book depth.

### ğŸ“Š Professional Dashboard
*   **Real-time Analytics**: Live equity curve, rolling Sharpe ratio, Sortino ratio, and drawdown tracking.
*   **Strategy Manager**: Hot-swap active strategies, view backtest stats, and manage deployments.
*   **Interactive Charts**: TradingView-style charts with overlay indicators (SMA, EMA, Bollinger Bands) and sub-panels (RSI, MACD, Volume).
*   **System Status**: Real-time monitoring of system health, latency, and risk limits.

### ğŸ—ï¸ Robust Infrastructure
*   **TimescaleDB**: High-performance time-series database for storing billions of tick-level data points.
*   **Dockerized**: Entire stack (Frontend, Backend, DB, MLflow, Prometheus) runs in isolated containers.
*   **Local-First**: Complete data sovereigntyâ€”no cloud dependencies required.

---

## ğŸ“˜ Comprehensive User Guide

### 1. Concepts for Non-Traders ğŸ“

Before running the bot, it's helpful to understand a few key concepts:

*   **OHLCV**: The standard format for price data (Open, High, Low, Close, Volume) over a specific time period (e.g., 1 minute).
*   **Order Book (LOB)**: The list of all buy and sell orders currently open in the market. "Level 2" data shows the depth of liquidity at different price levels.
*   **Alpha**: The "edge" or excess return generated by a strategy above a benchmark (like just holding Bitcoin).
*   **Sharpe Ratio**: A measure of risk-adjusted return. Higher is better. A Sharpe > 1 is good; > 2 is excellent.
*   **Drawdown**: The peak-to-trough decline in account value. We want to minimize this to protect capital.
*   **Slippage**: The difference between the expected price of a trade and the price at which the trade is executed.

### 2. Setup & Installation ğŸ› ï¸

**Prerequisites**:
*   Docker Desktop installed and running.
*   Binance Account (API Key & Secret).

**Steps**:
1.  **Clone the repository**:
    ```bash
    git clone https://github.com/yourusername/botrader.git
    cd botrader
    ```

2.  **Configure Environment**:
    Copy the example env file:
    ```bash
    cp .env.example .env
    ```
    Edit `.env` with your credentials:
    ```env
    BINANCE_API_KEY=your_key
    BINANCE_API_SECRET=your_secret
    BINANCE_TESTNET=True  # Keep True for safety!
    ```

3.  **Launch System**:
    ```bash
    docker-compose up -d --build
    ```
    This starts the Database, Backend, Frontend, and MLflow server.

### 3. Workflow for Maximum Performance ğŸš€

To get the most out of Botrader, follow this iterative cycle:

#### Step A: Data Collection ğŸ“¥
The system needs data to learn.
1.  Ensure the `collector` service is running (it starts automatically).
2.  It will stream live data into TimescaleDB.
3.  *Tip*: Let it run for a few days to build a rich history, or use the backfill scripts (if implemented) to import historical data.

#### Step B: Dataset Building ğŸ—ï¸
Convert raw data into training features.
```bash
# Enter the backend container
docker-compose exec backend bash

# Build standard dataset (OHLCV + Indicators)
python scripts/build_dataset.py --symbol BTCUSDT --timeframe 5m

# Build high-frequency LOB dataset (Optional, advanced)
python scripts/build_lob_dataset.py --depth 10
```

#### Step C: Model Training ğŸ‹ï¸
Train the AI models on your data.
```bash
# Train an ensemble of LightGBM and LSTM
python -m app.ml.train_ensemble --dataset dataset.parquet

# Or train a Reinforcement Learning agent
python -m app.ml.train_rl --timesteps 100000
```
*The training script automatically logs metrics to MLflow and registers the best model.*

#### Step D: Backtesting ğŸ§ª
Verify the model before risking money.
```bash
python -m app.backtest_main --strategy best_model_v1 --days 30
```
Check the output for Sharpe Ratio and Max Drawdown. If Sharpe < 1.0, go back to Step C with different parameters or features.

#### Step E: Live Trading ğŸ”´
1.  Open the Dashboard at `http://localhost:3001`.
2.  Go to the **Strategies** tab.
3.  You should see your trained model listed. Click **Activate**.
4.  Go to the **Overview** tab and click **Start Bot**.
5.  Monitor the **Insights** tab to see SHAP explanations for why the bot is buying or selling.

### 4. Dashboard Manual ğŸ–¥ï¸

*   **Overview**: Your command center. Shows the live price chart, recent trades, and the "Emergency Stop" button. Use this for daily monitoring.
*   **Performance**: Deep dive into metrics. Look at "Win Rate" and "Profit Factor" to judge strategy health.
*   **Strategies**: The control room for your AI models. View their backtest stats and toggle which one is in control.
*   **Insights**: The "Brain" view. See which features (e.g., "RSI is high", "Volume spike") are driving the current decision.
*   **Audit Log**: A secure record of every manual action (stops, starts, strategy changes) for accountability.

---

## âš ï¸ Risk Warning

Algorithmic trading involves significant risk. This software is provided for educational and research purposes.
*   **Always** start with `BINANCE_TESTNET=True`.
*   **Never** trade money you cannot afford to lose.
*   **Monitor** the bot closely during initial deployment.
*   Use the **Circuit Breakers** configuration in `config.py` to set hard limits on daily loss.

---

## Project Structure

```
Botrader/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ analytics/    # Performance metrics
â”‚   â”‚   â”œâ”€â”€ api/          # FastAPI endpoints
â”‚   â”‚   â”œâ”€â”€ core/         # Config & Registry
â”‚   â”‚   â”œâ”€â”€ execution/    # Smart execution (VWAP/TWAP)
â”‚   â”‚   â”œâ”€â”€ ml/           # AI Models (Training & Inference)
â”‚   â”‚   â”œâ”€â”€ risk/         # Risk Manager & Optimizer
â”‚   â”‚   â””â”€â”€ services/     # Data Collector
â”‚   â””â”€â”€ scripts/          # Utility scripts
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app/              # Next.js Pages
â”‚   â”œâ”€â”€ components/       # Reusable UI (Charts, Dashboard)
â”‚   â”œâ”€â”€ hooks/            # React Hooks
â”‚   â””â”€â”€ lib/              # API Client
â”œâ”€â”€ monitoring/           # Prometheus config
â””â”€â”€ docker-compose.yml
```
